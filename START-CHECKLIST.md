# üöÄ START CHECKLIST: –ß—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å

> **–ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞:** –í—Å–µ –≤–∞–∂–Ω–æ–µ, —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∫–æ–≥–¥–∞ –Ω–∞—á–Ω–µ–º implementation

---

## üìã –ü–û–†–Ø–î–û–ö –†–ê–ë–û–¢ (Step-by-Step)

### ‚úÖ –®–ê–ì 1: Database Schema (Prisma)

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
1. –î–æ–±–∞–≤–ª—è–µ–º 4 –Ω–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –≤ `schema.prisma`:
   - `GlobalDoctor` (–Ω–æ–≤—ã–π)
   - `ClinicDoctor` (–Ω–æ–≤—ã–π)
   - `GlobalPatient` (–Ω–æ–≤—ã–π)
   - `ClinicPatient` (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º `Patient`)

2. –ò–∑–º–µ–Ω—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥–µ–ª–∏:
   - `User`: —É–±–∏—Ä–∞–µ–º `specialization`, `licenseNumber`, `experience`
   - `User`: –¥–æ–±–∞–≤–ª—è–µ–º `globalDoctorId`, `globalPatientId`
   - `Appointment`: –º–µ–Ω—è–µ–º `doctorId` ‚Üí `clinicDoctorId`, `patientId` ‚Üí `clinicPatientId`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Schema –≥–æ—Ç–æ–≤–∞, –Ω–æ –ë–î –µ—â–µ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∞ (–±–µ–∑ breaking changes)

---

### ‚úÖ –®–ê–ì 2: Data Migration Script

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
1. –°–æ–∑–¥–∞–µ–º `migrate-to-global-clinic.js` script
2. –ú–∏–≥—Ä–∏—Ä—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ `User` (role=DOCTOR) ‚Üí —Å–æ–∑–¥–∞–µ–º `GlobalDoctor` + `ClinicDoctor`
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ `Patient` ‚Üí —Å–æ–∑–¥–∞–µ–º `GlobalPatient` + `ClinicPatient`
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ `Appointment` ‚Üí –æ–±–Ω–æ–≤–ª—è–µ–º `clinicDoctorId`, `clinicPatientId`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã

---

### ‚úÖ –®–ê–ì 3: Backend Services

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
1. –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã:
   - `global-doctor.service.js`
   - `clinic-doctor.service.js`
   - `global-patient.service.js`
   - `clinic-patient.service.js` (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º `patient.service.js`)

2. –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:
   - `appointment.service.js` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `clinicDoctorId`/`clinicPatientId`
   - `auth.service.js` ‚Üí —Å–æ–∑–¥–∞–µ—Ç `GlobalDoctor` –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ DOCTOR
   - `user.service.js` ‚Üí —Å–æ–∑–¥–∞–µ—Ç `GlobalDoctor` + `ClinicDoctor` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤—Ä–∞—á–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Backend –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

---

### ‚úÖ –®–ê–ì 4: Backend Controllers

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
1. –û–±–Ω–æ–≤–ª—è–µ–º `appointment.controller.js`:
   - Map `userId` ‚Üí `clinicDoctorId` –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º appointment
   - –í–∞–ª–∏–¥–∞—Ü–∏—è: `ClinicDoctor.clinicId === ClinicPatient.clinicId`

2. –û–±–Ω–æ–≤–ª—è–µ–º –¥—Ä—É–≥–∏–µ controllers (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

---

### ‚úÖ –®–ê–ì 5: Database Migration (Prisma)

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
1. –°–æ–∑–¥–∞–µ–º migration: `npx prisma migrate dev --name add_global_clinic_separation`
2. –ü—Ä–∏–º–µ–Ω—è–µ–º migration (—Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã)
3. –ó–∞–ø—É—Å–∫–∞–µ–º data migration script
4. –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∫–æ–ª–æ–Ω–∫–∏ (–≤ –Ω–æ–≤–æ–π migration)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Database –ø–æ–ª–Ω–æ—Å—Ç—å—é –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞

---

### ‚úÖ –®–ê–ì 6: Frontend Types

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
1. –û–±–Ω–æ–≤–ª—è–µ–º `types/api.types.ts`:
   - –î–æ–±–∞–≤–ª—è–µ–º `GlobalDoctor`, `ClinicDoctor`, `GlobalPatient`, `ClinicPatient`
   - –û–±–Ω–æ–≤–ª—è–µ–º `Appointment` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `clinicDoctorId`/`clinicPatientId`)
   - –û–±–Ω–æ–≤–ª—è–µ–º `User` (—É–±–∏—Ä–∞–µ–º doctor fields)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** TypeScript —Ç–∏–ø—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ

---

### ‚úÖ –®–ê–ì 7: Frontend Services

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
1. –û–±–Ω–æ–≤–ª—è–µ–º `appointment.service.ts`:
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `clinicDoctorId` –≤–º–µ—Å—Ç–æ `doctorId`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `clinicPatientId` –≤–º–µ—Å—Ç–æ `patientId`

2. –û–±–Ω–æ–≤–ª—è–µ–º `user.service.ts`:
   - –†–∞–±–æ—Ç–∞–µ—Ç —Å `ClinicDoctor` –≤–º–µ—Å—Ç–æ `User` –¥–ª—è doctor fields

3. –°–æ–∑–¥–∞–µ–º `clinic-doctor.service.ts` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Frontend API calls —Ä–∞–±–æ—Ç–∞—é—Ç —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

---

### ‚úÖ –®–ê–ì 8: Frontend Components

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
1. –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç doctor fields:
   - `AddDoctorModal.tsx` ‚Üí —Å–æ–∑–¥–∞–µ—Ç `GlobalDoctor` + `ClinicDoctor`
   - `DoctorsPage.tsx` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `ClinicDoctor` –≤–º–µ—Å—Ç–æ `User`
   - Appointment forms ‚Üí –∏—Å–ø–æ–ª—å–∑—É—é—Ç `clinicDoctorId`/`clinicPatientId`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** UI —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

---

### ‚úÖ –®–ê–ì 9: Testing

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
1. –¢–µ—Å—Ç–∏—Ä—É–µ–º data migration (–Ω–∞ –∫–æ–ø–∏–∏ –ë–î)
2. –¢–µ—Å—Ç–∏—Ä—É–µ–º appointment creation
3. –¢–µ—Å—Ç–∏—Ä—É–µ–º doctor creation
4. –¢–µ—Å—Ç–∏—Ä—É–µ–º patient creation
5. E2E —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö flows

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### ‚úÖ –®–ê–ì 10: Cleanup

**–ß—Ç–æ –¥–µ–ª–∞–µ–º:**
1. –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –∏–∑ `User` (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É–¥–∞–ª–µ–Ω—ã)
2. –£–¥–∞–ª—è–µ–º deprecated code
3. –û–±–Ω–æ–≤–ª—è–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ß–∏—Å—Ç—ã–π –∫–æ–¥, –±–µ–∑ legacy

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ú–û–ú–ï–ù–¢–´

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ (–Ω–µ –∑–∞–±—ã—Ç—å!):

1. **Backup –ø–µ—Ä–µ–¥ migration!**
   ```bash
   cp backend/prisma/dev.db backend/prisma/dev.db.backup
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ migration:**
   - –í—Å–µ User (DOCTOR) –∏–º–µ—é—Ç GlobalDoctor?
   - –í—Å–µ GlobalDoctor –∏–º–µ—é—Ç —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω ClinicDoctor?
   - –í—Å–µ Appointment –∏–º–µ—é—Ç clinicDoctorId/clinicPatientId?

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è clinic isolation:**
   - ClinicDoctor.clinicId === ClinicPatient.clinicId (–≤ appointment)
   - –ù–∏–∫–∞–∫–∏—Ö cross-clinic appointments!

### üü° –í–∞–∂–Ω–æ:

4. **Performance:**
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ `globalDoctorId`, `clinicId` –≤ `ClinicDoctor`
   - –î–æ–±–∞–≤–∏—Ç—å composite index `[globalDoctorId, clinicId]`

5. **Error handling:**
   - –ß—Ç–æ –µ—Å–ª–∏ GlobalDoctor –Ω–µ –Ω–∞–π–¥–µ–Ω?
   - –ß—Ç–æ –µ—Å–ª–∏ ClinicDoctor –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è clinicId?
   - Graceful degradation

### üü¢ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–º–æ–∂–Ω–æ –ø–æ–∑–∂–µ):

6. **Multi-clinic UI:**
   - Dropdown –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–ª–∏–Ω–∏–∫–∏
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –∫–ª–∏–Ω–∏–∫—É

7. **Patient matching:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö GlobalPatient
   - UI –¥–ª—è –≤—ã–±–æ—Ä–∞/—Å–æ–∑–¥–∞–Ω–∏—è

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### Database:
- ‚úÖ +4 –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ -3 –∫–æ–ª–æ–Ω–∫–∏ –∏–∑ `users`
- ‚úÖ -1 –∫–æ–ª–æ–Ω–∫–∞ –∏–∑ `appointments`
- ‚úÖ +2 –∫–æ–ª–æ–Ω–∫–∏ –≤ `users` (globalDoctorId, globalPatientId)
- ‚úÖ +2 –∫–æ–ª–æ–Ω–∫–∏ –≤ `appointments` (clinicDoctorId, clinicPatientId)

### Backend:
- ‚úÖ +4 –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–∞
- ‚úÖ ~5 –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ ~3 –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞

### Frontend:
- ‚úÖ ~10 –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö TypeScript —Ç–∏–ø–æ–≤
- ‚úÖ ~5 –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö services
- ‚úÖ ~3-5 –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

## ‚è±Ô∏è –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò

- **–®–∞–≥ 1-2:** Schema + Migration script ‚Üí 2-3 —á–∞—Å–∞
- **–®–∞–≥ 3-4:** Backend services + controllers ‚Üí 3-4 —á–∞—Å–∞
- **–®–∞–≥ 5:** Database migration ‚Üí 1 —á–∞—Å (—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- **–®–∞–≥ 6-8:** Frontend ‚Üí 2-3 —á–∞—Å–∞
- **–®–∞–≥ 9:** Testing ‚Üí 2-3 —á–∞—Å–∞
- **–®–∞–≥ 10:** Cleanup ‚Üí 1 —á–∞—Å

**–ò—Ç–æ–≥–æ:** ~12-15 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã (1.5-2 –¥–Ω—è)

---

## üéØ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

### ‚úÖ Migration —É—Å–ø–µ—à–Ω–∞, –µ—Å–ª–∏:
1. –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
2. –ù–∏–∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ—Ç–µ—Ä—è–Ω—ã
3. –í—Å–µ appointments —Ä–∞–±–æ—Ç–∞—é—Ç
4. –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã—Ö doctors/patients
5. –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å appointments
6. Clinic isolation —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–µ—Ç cross-clinic data)

### ‚úÖ Code –≥–æ—Ç–æ–≤, –µ—Å–ª–∏:
1. –ù–µ—Ç TypeScript –æ—à–∏–±–æ–∫
2. –ù–µ—Ç ESLint –æ—à–∏–±–æ–∫
3. –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
4. API endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
5. Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üö® ROLLBACK PLAN

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

1. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å migration**
2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å backup:**
   ```bash
   cp backend/prisma/dev.db.backup backend/prisma/dev.db
   ```
3. **–û—Ç–∫–∞—Ç–∏—Ç—å –∫–æ–¥:**
   ```bash
   git checkout <previous-commit>
   ```
4. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É**
5. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å**

---

## üìù CHECKLIST –ü–ï–†–ï–î START

- [ ] Backup database —Å–æ–∑–¥–∞–Ω
- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã (–∏–ª–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–µ—Ç–∫–µ)
- [ ] –ü–æ–Ω—è—Ç–µ–Ω –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏
- [ ] –ì–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- [ ] –ï—Å—Ç—å –≤—Ä–µ–º—è –¥–ª—è —Ä–∞–±–æ—Ç—ã (1.5-2 –¥–Ω—è)

---

## üöÄ –ì–û–¢–û–í–´ –ù–ê–ß–ê–¢–¨?

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—á–∏–Ω–∞–µ–º —Å –®–∞–≥–∞ 1 (Database Schema)!

---

**–í–æ–ø—Ä–æ—Å—ã?** üí¨

